window.Utils={updateQueryString:function(n,t,i){var u,r,f;return i||(i=window.location.href),u=new RegExp("([?&])"+n+"=.*?(&|#|$)(.*)","gi"),u.test(i)?typeof t!="undefined"&&t!==null?i.replace(u,"$1"+n+"="+t+"$2$3"):(r=i.split("#"),i=r[0].replace(u,"$1$3").replace(/(&|\?)$/,""),typeof r[1]!="undefined"&&r[1]!==null&&(i+="#"+r[1]),i):typeof t!="undefined"&&t!==null?(f=i.indexOf("?")!==-1?"&":"?",r=i.split("#"),i=r[0]+f+n+"="+t,typeof r[1]!="undefined"&&r[1]!==null&&(i+="#"+r[1]),i):i},commaSeparatedValues:function(n){var t,i,r;if(n.length===0)return"";for(t="",i=0,r=n.length;i<r;i++)t+=n[i]+",";return t.substr(0,t.length-1)},extract:function(n,t){for(var r=[],i=0,u=n.length;i<u;i++)r.push(t(n[i]));return r},parseDate:function(n){if(n.length!=10)return null;var t=n.substr(0,2),i=n.substr(3,2),r=n.substr(6,4);return new Date(r,i-1,t)},addEventHandler:function(n,t,i){for(var r=0,u=n.length;r<u;r++)$(n[r].bind(t,i))},setIsLoading:function(n){$("body").toggleClass("loading",n)}};window.Forms={initMask:function(n,t,i){i=typeof i!="undefined"?i:!0;n.mask(t);n.attr("placeholder")===undefined&&n.attr("placeholder",t.replace(/\d/g,"_"));i&&n.closest("form").submit(function(){return n.val(n.val().replace(/\D/g,"")),!0})},destroyAutonumeric:function(n){if(n.is("[data-autonumeric]")){var t=n.val();n.autoNumeric("destroy");n.removeAttr("data-autonumeric");n.val(t)}},getAutoNumericRawFloatValue:function(n){var i={",":"."," €":"",_:""},t=n.val();for(var r in i)i.hasOwnProperty(r)&&(t=t.replaceAll(r,i[r]));return t===""||t==="."?0:parseFloat(t)},fieldValidationError:function(n,t,i){i=i===undefined?!0:i;var r=n.parent().find('span[class*="field-validation"]'),u=!(t!=null&&t.length>0);u?(r.addClass("field-validation-valid").removeClass("field-validation-error").text(""),i&&n[0].setCustomValidity("")):(r.removeClass("field-validation-valid").addClass("field-validation-error").text(t),i&&n[0].setCustomValidity("Erreur"));n.closest(".form-group").toggleClass("has-error",!u)},appendInputGroupAddon:function(n,t){var i=n.parent();return $("<div />").addClass("input-group").append(n.detach()).append($("<span />").addClass("input-group-addon").text(t)).appendTo(i)}};window.Metier={getNumSSRawValue:function(n){return n.val().replaceAll(".","").replaceAll("/","").replaceAll("_","")},getCleNumSS:function(n){var f,r,o,e,i,u;for(n=n.toLowerCase(),f=!1,r=0,o=n.length;r<o;r++)e=n[r],e<="z"&&e>="c"&&(f=!0);if(f)return"99";var t=n.substr(0,13),s=t.indexOf("a")>-1,h=t.indexOf("b")>-1;return(t=t.replaceAll("a","0").replaceAll("b","0"),i=parseInt(t),isNaN(i))?null:(s&&(i-=1e6),h&&(i-=2e6),u=(97-i%97).toString(),u.length==1?"0"+u:u)},getDateNaissance:function(n,t){var f={dateNaissance:null,dateNaissanceInconnue:null},u=new Date,i,e,r,o;return u.setFullYear(u.getUTCFullYear()-16),i=u.getFullYear(),e=parseInt(n.substr(1,2)),isNaN(e)||(i=e),i+=i<30?2e3:1900,r=u.getMonth()+1,o=parseInt(n.substr(3,2)),isNaN(o)||(r=o),t==34||r>0&&r<=12||n.substr(0,13)=="0000000000000"?f.dateNaissance=new Date(i,r-1,1):f.dateNaissanceInconnue=i,f},getCodifTitre:function(n){switch(n){case 1:return["010"];case 2:return["020","030"];default:return null}},getTitreFromNumSS:function(n){if(n.length==0)return null;var t=parseInt(n.substr(0,1));return t===1||t===2?t:null}},function(n,t){var i=function(n,t){this.elem=n;this.options=t};i.prototype={defaults:{message:null,action:null},init:function(){var t=this;this.settings=n.extend({},this.defaults,this.options);this.settings.message=this.settings.message||this.elem.data("message");this.settings.action=this.settings.action||this.elem.data("action")||this.elem.attr("href");this.elem.attr("href","#");this.dialog=n("#confirmModal");this.elem.click(function(n){n.preventDefault();t.showConfirmDialog()})},showConfirmDialog:function(){this.dialog.find(".modal-body-content").find("span").text(this.settings.message);this.dialog.find(".modal-confirm-button").attr("href",this.settings.action);this.dialog.modal("show")},closeConfirmDialog:function(){this.dialog.modal("hide")}};i.defaults=i.prototype.defaults;n.fn.confirm=function(t){this.each(function(){new i(n(this),t).init()})};t.Confirm=i}(jQuery,window),function(n,t){var i=function(t,i){this.elem=n(t);this.options=i};i.prototype={defaults:{},init:function(){var r=this,i,u;this.settings=n.extend({},this.defaults,this.options);this.menuItems=this.elem.find(".menu-item");this.menuSubItems=this.menuItems.find("a");this.menuSubItems.click(function(){menuSubItems.removeClass("active");n(this).addClass("active")});this.menuItems.click(function(t){if(!n(this).is(".disabled")&&n(this).is('a[href="#"]')){t.preventDefault();var i=r.menuItems.filter(".open");r.toggleItem(i);i.is(n(this))||r.toggleItem(n(this))}});i=n("body");u=n(".nav-fullmask").click(function(){i.removeClass("nav-shown").addClass("nav-hidden");u.fadeOut(300)});n("header").find(".toggle-menu").click(function(n){n.preventDefault();var r=t.matchMedia("only screen and (max-width: 767px)").matches;i.is(".nav-shown")||i.is(".nav-hidden")?i.toggleClass("nav-shown").toggleClass("nav-hidden"):i.addClass(r?"nav-shown":"nav-hidden");r&&u.fadeIn(300)})},toggleItem:function(n){n.toggleClass("open");n.closest("li").find("ul").slideToggle(200)}};i.defaults=i.prototype.defaults;n.fn.drawer=function(n){return new i(this.first(),n).init()};t.Drawer=i}(jQuery,window),function(n,t){var i=function(t,i){this.elem=n(t);this.options=i};i.prototype={defaults:{condition:null,trigger:null,event:"change",animate:!0},init:function(){var i=this,t;this.settings=n.extend({},this.defaults,this.options);t=this.settings.event;this.settings.trigger.on(t,function(){i.updateVisibility()});this.updateVisibility()},updateVisibility:function(){var n=!1,t=this.settings.trigger.val();(typeof this.settings.condition=="string"?n=t===this.settings.condition:typeof this.settings.condition=="object"?n=this.settings.condition.indexOf(t)!==-1:typeof this.settings.condition=="function"&&(n=this.settings.condition(this.elem,this.settings.trigger)),n===!0||n===!1)&&(this.settings.animate?this.elem.fadeInOrOut(n):this.elem.toggle(n))}};i.defaults=i.prototype.defaults;n.fn.visibilityCondition=function(n){return new i(this,n).init()};t.VisibilityCondition=i}(jQuery,window),function(n,t){var i={WEAK:"weak",MEDIUM:"medium",STRONG:"strong"},r=function(t,i){this.elem=n(t);this.options=i};r.prototype={defaults:{bisElem:null,alert:null,submitButton:null,inputGroupAddons:null,rules:{minStrength:i.MEDIUM,minLength:8,atLeastOneDigit:!0,atLeastOneLetter:!0,atLeastOneUppercaseLetter:!1,atLeastOneSpecialChar:!1}},init:function(){var t=this;this.settings=n.extend({},this.defaults,this.options);this.settings.submitButton==null&&(this.settings.submitButton=this.elem.closest("form").find('[type="submit"]'));this.elem.add(this.settings.bisElem).on("keyup change",function(){t.testStrengthLive()}).trigger("keyup")},testStrengthLive:function(){var r=this,u=this.getStrength(this.elem.val(),this.settings.bisElem.val()),t=u[0],f=u[1],e=this.getStrengthColor(t);this.elem.add(this.settings.bisElem).css("border-color",e);this.settings.alert[0].classList="alert alert-"+this.getAlertClass(t);this.settings.alert.toggle(f!=null).text(f);t===i.WEAK?this.settings.submitButton.attr("disabled","disabled"):this.settings.submitButton.removeAttr("disabled");this.elem.add(this.settings.bisElem).each(function(){n(this).parent().find(".input-group-addon").html(r.getInputGroupAddonContent(t))[0].classList="input-group-addon bg-"+r.getAlertClass(t)})},getStrengthColor:function(n){return{weak:"#D50000",medium:"#0277BD",strong:"#2E7D32"}[n]},getAlertClass:function(n){return{weak:"danger",medium:"info",strong:"success"}[n]},getInputGroupAddonContent:function(n){return{weak:'<i class="mdi mdi-emoticon-sad"><\/i>',medium:'<i class="mdi mdi-emoticon-happy"><\/i>',strong:'<i class="mdi mdi-emoticon"><\/i>'}[n]},getStrength:function(n,t){var u,f;if(n.length===0)return[i.WEAK,null];if(n.length<this.settings.rules.minLength)return[i.WEAK,"Le mot de passe doit contenir au moins "+this.settings.rules.minLength+" caractères"];if(this.settings.rules.atLeastOneDigit&&!/\d/.test(n))return[i.WEAK,"Le mot de passe doit contenir au moins un chiffre"];if(this.settings.rules.atLeastOneLetter&&!/[a-zA-Z]/.test(n))return[i.WEAK,"Le mot de passe doit contenir au moins une lettre."];if(n!==t&&n.length>0)return[i.WEAK,"Vous avez saisi deux mots de passe différents"];var r=i.MEDIUM,e=this.settings.rules.atLeastOneUppercaseLetter,o=/[A-Z]/.test(n);return e&&!o?[i.WEAK,"Le mot de passe doit contenir au moins une majuscule."]:(!e&&o&&(r=i.MEDIUM),u=this.settings.rules.atLeastOneSpecialChar,f=/[$-/:-?{-~!"^_`\[\]]/.test(n),u&&!f)?[i.WEAK,"Le mot de passe doit contenir au moins un caractère spécial."]:(!u&&f&&(r=i.STRONG),n.length>12)?[i.STRONG,null]:[r,null]}};r.defaults=r.prototype.defaults;n.fn.passwordStrength=function(n){return new r(this,n).init()};t.PasswordStrength=r}(jQuery,window),function(){var r,i,t,n=!1,u=function(n,t,i){n.joyride("destroy");t.cookieMonster=!i;r=n.joyride(t)},f=function(){$(".joyride-starter").length===0&&$("<a />").attr("href","#").attr("data-toggle","tooltip").attr("data-placement","left").attr("title","Aide").addClass("action joyride-starter").append($("<i />").addClass("mdi mdi-help-circle")).click(function(){u(t,i,!0)}).prependTo($(".header-right").find(".actions").first())};$(document).ready(function(){var e=$("body").data("visite-guidee"),s,o;if(e!==undefined){if(t=$('ol[data-visite-guidee="'+e+'"]'),t.length!==1){console.error("Could not find the right wizard, aborting");return}$("body").on("click",".joyride-close-tip",function(){n=!1});s={autoStart:!0,cookieName:"VisiteGuidee",modal:!0,preRideCallback:function(){n=!0},postRideCallback:function(){n=!1;f()}};o={};switch(e){case"profil":o={pauseAfter:[3],postStepCallback:function(t){if(n)switch(t){case 3:var i=$('nav > ul > li > a.menu-item[href="#"]').toArray(),u=function(){var n=i.shift();n.click();i.length>0?setTimeout(u,500):r.joyride("resume")};u()}}}}i=$.extend({},s,o);$(window).load(function(){u(t,i,!1);n||f()})}})}();String.prototype.replaceAll=function(n,t){var i=this;return i.split(n).join(t)};Date.prototype.toShortDateString=function(){var n=this.getDate(),t=this.getMonth()+1,i=this.getFullYear();return(n<=9?"0"+n:n)+"/"+(t<=9?"0"+t:t)+"/"+i};$.extend($.fn.datepicker.defaults,{language:"globalize",weekStart:1,format:"dd/mm/yyyy",todayBtn:!1,todayHighlight:!0});$.extend($.fn.autoNumeric.defaults,{aSep:" ",aDec:",",altDec:".",pSign:"s"});$.mask.autoclear=!1;$.fn.fadeInOrOut=function(n){return n?this.fadeIn():this.fadeOut()};$(document).ready(function(){$("body").is(".page-login")||($("nav").drawer(),$(".table:not(.sorter-false)").each(function(){var n={dateFormat:"uk",sortReset:!0},t;$(this).is(".filter-true")&&(t=$(this),!$(this).closest(".panel").length||$("<i />").attr("data-toggle","tooltip").attr("data-placement","left").attr("title","Filtrer").addClass("mdi mdi-filter pull-right").click(function(){$(this).toggleClass("mdi-filter").toggleClass("mdi-filter-outline");t.find(".tablesorter-filter-row").toggle();t.find(".input-sm:first").focus()}).appendTo($(this).closest(".panel").find(".panel-heading")),n=$.extend(n,{widthFixed:!0,cssChildRow:"tablesorter-childRow",widgets:["filter"],widgetOptions:{filter_cssFilter:"form-control input-sm",filter_placeholder:{search:"Filtrer…",select:""},filter_childRows:!1}}));$(this).tablesorter(n)}),$(".table:not(.sorter-false)").tablesorter({dateFormat:"uk",sortReset:!0}),$("[data-autonumeric]").each(function(n,t){var i={};$(this).is('[data-type="Currency"]')&&(i.aSign=" €");$(t).autoNumeric("init",i)}));$(".bs-close").click(function(){$(this).closest(".bs-callout").slideUp()});$(":file").on("fileselect",function(n,t,i){var r=$(this).parents(".input-group").find(":text"),u=t>1?t+" fichiers sélectionnés":i;r.length&&r.val(u)});$(".datepicker").each(function(){var t=$(this).data("date-min"),i=$(this).data("date-max"),n={language:"fr",enableOnReadonly:!1};t!==""&&(n.startDate=new Date(t));i!==""&&(n.endDate=new Date(i));$(this).datepicker(n);$("<i/>").addClass("mdi mdi-calendar").insertAfter($(this))});$(".confirmation[data-message]").confirm();$("form").submit(function(){return $("input").each(function(){var t=$(this),n;try{n=t.autoNumeric("get");t.autoNumeric("destroy");n=n.replaceAll(".",",");t.val(n)}catch(i){}}),!0});$('[data-toggle="tooltip"]').tooltip({container:"body",animation:!1});$(".panel-togglable").find(".panel-heading").click(function(){$(this).parent().toggleClass("panel-togglable-closed").children().filter(":not(.panel-heading)").slideToggle()});$(".panel-closed").find(".panel-heading").click();$(".pagination-wrap").find("[data-page]").each(function(){$(this).attr("href",Utils.updateQueryString("page",$(this).data("page")))});Forms.initMask($("input.datepicker"),"99/99/9999",!1);$(".forceStopLoading").click(function(){setTimeout(function(){Utils.setIsLoading(!1)},2e3)});$(".filterable").find(".mdi-filter").click()});window.onbeforeunload=function(){Utils.setIsLoading(!0)};$.ajaxSetup({beforeSend:function(){Utils.setIsLoading(!0)},complete:function(){Utils.setIsLoading(!1)}});